# 前提条件

- masterへの直接コミットは原則禁止
- どんな内容でもPull Requestを必ず作って、別の人に確認してもらうようにする（事後確認でもOK）

# Github へのコミットの単位

- 変更単位でコミットする。
- 日本語で変更点を書く

# タスク

- [issues](https://git.denx.jp/SSP/SSP/issues) で管理しています。

## 担当者決定

- [issues](https://git.denx.jp/SSP/SSP/issues) の Assignee で割り当てます。
- 基本的に 1 Issue、1 Pull Request となるように Issue を上げるのが良いですが、大きすぎる場合は分割する方が良いです。

# ブランチ作成

- 各リポジトリーに対して「_yourname/xxxx-yyyy-zzz」という名前のブランチを作る。
 - _yourname の部分は担当者名。
 - xxxx-yyyy-zzz は機能名。
 - Pull Request(PR) もこのブランチから作る。
 - fork はしない
 - 最初から複数人で作る想定のブランチの場合は、 _yourname の部分はなくても良い。
- ブランチ名についてはチェインケース（ハイフン区切り）とする。
  - （例） `_odaka/rm-xml-serializer`

# PR の作り方
- 基本的には**masterブランチ**に向けてPRを作成する
- 作成したPRと関連するIssueには担当者をアサインする
  - どれを誰が作業しているのかを分かるようにするのと、作業のブッキングを防ぐため
- 実装前に先に PR を作成しておく場合はタイトルに「[WIP]」と付ける。
  - WIPについては[この記事](http://qiita.com/numa08/items/b676e38e3dbabfd39d18)を読んでください
  - 誰がどの Issue を担当しているかわかりやすく、経過も見えるため推奨しています
- 実装が完了したら PR を作成して「レビュー依頼」ラベルをつける。
  - WIP の場合は、タイトルから「[WIP]」をはずし「レビュー依頼」ラベルを付ける。
  - 機能が複数ある場合、チェックすべき重要ポイントがある場合は、コメントにチェックボックスを設けておく。
  - PR のコメントに Issue の URL を載せる
  - 関連する PR があればその URL も載せる

# PR 作成まで終わったら

- **基本的に実装者がレビュアーの負担を可能な限り軽減できるように努力する**。
- レビュアーがレビューしやすい形にする
  - 仕様が複雑な場合、仕様まとめを載せる

# レビュー依頼
- レビューしてもらえる状況になったらタイトルから[WIP]を外し、「レビュー依頼」ラベルをつけて、`#ssp_engineer` チャンネルにて @kusakari にレビュー依頼する。
  - @odk がGitHubのReviewer機能でレビュアーを割り当てる
  - PRのページで「Awaiting review from you」で絞り込むと自身がレビュアーに割り当てられたPR一覧が見られる
- 通常、レビュアーは1人で、重要度の高いPRには2人のレビュアーを設定する。
- レビュアーがレビュー完了の時は`Review changes`から`Approve`する
- 最後のレビュアーがレビュー完了の時は「レビュー依頼」ラベルをはずす。
- レビュー時に問題が見つかった場合は、 PR の files からコメントを付けて「差し戻し」ラベルを付けて「レビュー依頼」ラベルを外す。
  - 実装者は問題点を修正したら「差し戻し」ラベルを外して「レビュー依頼」ラベルを付ける。
  - 一度、「差し戻し」になると再度全レビュアーにレビューしてもらう必要がある
    - ただし、軽微な修正の場合はこの限りではない。このあたりは臨機応変に対応してください。
- チェックボックスについては各レビュアーがコピーして、コメントにしてチェックを付ける。

# レビューについて

## レビューの目的

- より良いコードとなるように
  - 良いコードとは**新しいメンバーが最短時間で理解できる（意図が伝わる）ソースコード**とする
  - 必要あれば提案・質問・議論する
- バグのダブルチェック
  - 実装者およびレビュアーが責任を持つ
- 参考
  - [コードレビューのベストプラクティス](http://postd.cc/code-review-best-practices/)

## 実装者に求める基準
- C# および Unity の基本的な使い方を理解している

- Unity の機能は積極的に使うようにし、よく知らないからと言って、あまり調べず独自実装（自分のわかりやすい方法を選択）をしないように注意する。

## レビュアーの心がけ
- このあたりを読んでおこう
  - http://d.hatena.ne.jp/naoya/20140313/1394664578
  - http://blog.livedoor.jp/lalha/archives/50495777.html
- コメントは指摘→修正という流れではなく、基本的には提案が基本の流れとし、質問や提案の形でコメントするように気をつける。
  - 「こうすべきだ」ではなく、実装者が選択できるように提案する。あくまで**選択権は実装者**にある。
  - コーディングルール・チーム方針などに関わらない、個人の好みの問題となった場合、**実装者の考えを尊重**する。
- Issue に書いていないことを拡大解釈しないように注意し、必要があれば別 Issue として上げる。
  - 例えば、Aをやるなら当然Bも対応すべき的なこと。
  - 「ついでに〜やっておきました」は些細なことなら良いが変更が多数におよぶようなことはしてはならない。

# レビューが終わったら

- レビュアー全員がレビュー済みの PR を @odk がマージする
